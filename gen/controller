#!/bin/bash
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"

# Ensure we are in an app dir
if [ ! -f App.hs ]; then
    echo "You have to be in a app dir (e.g. src/Apps/Web) to run the generator"
	exit 1
fi

# Switch to project root
cd ../../../
ghci -threaded -isrc -fexternal-interpreter -fomit-interface-pragmas +RTS -A128m -RTS -ghci-script <(echo ":script src/Foundation/applicationGhciConfig"; echo ":load src/Foundation/ControllerGenerator.hs"; echo ":main $@"; echo ":quit")
